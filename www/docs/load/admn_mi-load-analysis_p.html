<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
   <title>Loading the Initial Data Set for a Master Index Application</title>

   <meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
   <meta http-equiv="content-language" content="en-US">
   <meta name="keywords" content="">
   <meta name="description" content="Loading the Initial Data Set for a Master Index Application provides information and instructions for analyzing match logic, matching bulk data, and loading and initial set of data into a master index database. ">
   <meta name="date" content="2008-05-01">
   <meta name="author" content="Carol Thom">

   <link rel="stylesheet" type="text/css" href="http://www.netbeans.org/netbeans.css" media="screen">
   <link rel="stylesheet" type="text/css" href="css/mural.css">
</head>

<body>

   <!-- Copyright (c) 2008 Sun Microsystems, Inc. All rights reserved. -->
   <!-- Use is subject to license terms. -->

   <a name="top"></a>
   <h1>Loading the Initial Data Set for a Master Index Application</h1>
   <h1>DRAFT VERSION</h1>
   <div class="articledate" style="margin-left: 0px;">Last Updated: May 2008</div>

   <div class="embeddedtocpane">
     <h5><span class="tocpageleft"><a href="admn_mi-load-config_p.html">Previous</a></span>
         <span class="tocpageright"><a href="admn_mi-load-run_t.html">Next</a></span></h5>

     <h5><span class="toctitle">Contents</span></h5>
     <div class="embeddedtoc">
       <p class="toc level1"><a href="lidsevseispv.html">Loading the Initial Data Set for a Master Index Application</a></p>
<p class="toc level2"><a href="admn_mi-load-overview_c.html">Initial Bulk Match and Load Overview</a></p>
<p class="toc level3"><a href="admn_mi-load-overview_c.html#admn_mi-load-process_c">Initial Bulk Match and Load Process Overview</a></p>
<p class="toc level3"><a href="admn_mi-load-overview_c.html#admn_mi-load-procedure_c">Data Cleansing, Matching, and Loading Procedure Overview</a></p>
<p class="toc level3"><a href="admn_mi-load-overview_c.html#admn_mi-load-dist_c">Distributed Processing</a></p>
<p class="toc level3"><a href="admn_mi-load-overview_c.html#admn_mi-load-match_c">About the Bulk Match Process</a></p>
<p class="toc level4"><a href="admn_mi-load-overview_c.html#gglab">Block Distribution</a></p>
<p class="toc level4"><a href="admn_mi-load-overview_c.html#gglcg">Matching Records</a></p>
<p class="toc level4"><a href="admn_mi-load-overview_c.html#gglbz">EUID Assignment</a></p>
<p class="toc level4"><a href="admn_mi-load-overview_c.html#gglaz">Master Index Image Creation</a></p>
<p class="toc level3 tocsp"><a href="admn_mi-load-overview_c.html#admn_mi-load-load_c">About the Bulk Load Process</a></p>
<p class="toc level3"><a href="admn_mi-load-overview_c.html#admn_mi-load-cluster_c">About the Cluster Synchronizer</a></p>
<p class="toc level3"><a href="admn_mi-load-overview_c.html#admn_mi-load-files_c">Required Format for Flat Data Files</a></p>
<p class="toc level2 tocsp"><a href="admn_mi-load-gen_t.html">Generating the Initial Bulk Match and Load Tool</a></p>
<p class="toc level4"><a href="admn_mi-load-gen_t.html#gentextid-225">To Generate the Initial Bulk Match and Load Tool</a></p>
<p class="toc level2 tocsp"><a href="admn_mi-load-envvar_t.html">Configuring the Environment</a></p>
<p class="toc level4"><a href="admn_mi-load-envvar_t.html#gglre">To Configure the Environment</a></p>
<p class="toc level2 tocsp"><a href="admn_mi-load-database_t.html">Creating the Cluster Synchronizer Database</a></p>
<p class="toc level4"><a href="admn_mi-load-database_t.html#ggjoo">To Create the Cluster Synchronization Tables</a></p>
<p class="toc level2 tocsp"><a href="admn_mi-load-config_p.html">Configuring the Initial Bulk Match and Load Tool</a></p>
<p class="toc level3"><a href="admn_mi-load-config_p.html#admn_mi-load-proc-cfg_t">Configuring the Initial Bulk Match and Load Tool Processing</a></p>
<p class="toc level5"><a href="admn_mi-load-config_p.html#ggjmc">To Configure the IBML Tool</a></p>
<p class="toc level3 tocsp"><a href="admn_mi-load-config_p.html#admn_mi-load-log-cfg_t">Configuring Initial Bulk Match and Load Tool Logging</a></p>
<p class="toc level5"><a href="admn_mi-load-config_p.html#gglfe">To Configure IBML Tool Logging</a></p>
<p class="toc level3 tocsp"><a href="admn_mi-load-config_p.html#admn_mi-load-config_r">Initial Bulk Match and Load Tool Configuration Properties</a></p>
<p class="toc level4"><a href="admn_mi-load-config_p.html#ggjps">Initial Bulk Match and Load Tool Blocking Query Configuration</a></p>
<p class="toc level4"><a href="admn_mi-load-config_p.html#ggjqc">Initial Bulk Match and Load Tool Match String Configuration</a></p>
<p class="toc level4"><a href="admn_mi-load-config_p.html#ggjqd">Initial Bulk Match and Load Tool Processing Configuration</a></p>
<p class="toc level4"><a href="admn_mi-load-config_p.html#ggtoa">FTP Server Configuration</a></p>
<p class="toc level4"><a href="admn_mi-load-config_p.html#ggjpm">Cluster Synchronizer Database Configuration</a></p>
<p class="toc level4"><a href="admn_mi-load-config_p.html#ggjpn">SQL*Loader Configuration</a></p>
<p class="toc level4"><a href="admn_mi-load-config_p.html#ggjpu">Data Reader Configuration</a></p>
<p class="toc level3 tocsp"><a href="admn_mi-load-config_p.html#admn_mi-load-log_r">Initial Bulk Match and Load Tool Logging Properties</a></p>
<div class="onpage">
<p class="toc level2 tocsp"><a href="">Performing a Match Analysis</a></p>
<p class="toc level3"><a href="#admn_mi-load-analysis_t">Running the Bulk Matcher in Analysis Mode</a></p>
<p class="toc level5"><a href="#gglda">To Run the Bulk Matcher in Analysis Mode</a></p>
<p class="toc level3 tocsp"><a href="#admn_mi-load-review_t">Reviewing the Match Analysis Results</a></p>
<p class="toc level3"><a href="#admn_mi-load-match_t">Reconfiguring the Matching Logic</a></p>
<p class="toc level5"><a href="#ggtdc">To Reconfigure the Matching Logic</a></p>
</div>
<p class="toc level2 tocsp"><a href="admn_mi-load-run_t.html">Performing the Bulk Match</a></p>
<p class="toc level4"><a href="admn_mi-load-run_t.html#ggtcb">To Perform the Bulk Match</a></p>
<p class="toc level2 tocsp"><a href="admn_mi-loadnmatch_t.html">Running the Bulk Match and Bulk Load in One Step (SQL*Loader Only)</a></p>
<p class="toc level4"><a href="admn_mi-loadnmatch_t.html#ggtcbulk">To Run the Bulk Match and Bulk Load in One Step</a></p>
<p class="toc level2 tocsp"><a href="admn_mi-load-gensql_p.html">Loading Data Using SQL*Loader</a></p>
<p class="toc level4"><a href="admn_mi-load-gensql_p.html#ggtbq">To Load the Data Using SQL*Loader</a></p>
<p class="toc level2 tocsp"><a href="admn_mi-load-etlbulk_p.html">Loading Data Using the Data Integrator Bulk Loader</a></p>
<p class="toc level4"><a href="admn_mi-load-etlbulk_p.html#ggtby">To Load the Data Using the Data Integrator Bulk Loader</a></p>
<p class="toc level3 tocsp"><a href="admn_mi-load-etlbulk_p.html#admn_mi-load-cnfg_r">Data Integrator Bulk Loader Properties</a></p>

     </div>
   </div>


   <div class="maincontent">


<a name="admn_mi-load-analysis_p"></a>

<h2>Performing a Match Analysis</h2>
<p>Before you perform the actual data matching, you can perform match analyses on
a subset of the data to be loaded to determine whether the
various components of the match process are configured correctly. This analysis can show
whether the data blocks defined for the blocking query are returning too many
or too few records and whether certain fields in the match string are
inaccurately skewing the composite match weight. You can also use this analysis to
determine whether the duplicate and match threshold are correct.</p><p>This is an iterative process, and you might need to run through
the analysis several times before you are satisfied that the match and query
configuration is optimized for your data set. </p><p>Perform the following steps to analyze the data for matching:</p>
<ul><li><p><a href="#admn_mi-load-analysis_t">Running the Bulk Matcher in Analysis Mode</a></p></li>
<li><p><a href="#admn_mi-load-review_t">Reviewing the Match Analysis Results</a></p></li>
<li><p><a href="#admn_mi-load-match_t">Reconfiguring the Matching Logic</a></p></li></ul>


<div class="indent"><a name="admn_mi-load-analysis_t"></a><h3>Running the Bulk Matcher in Analysis Mode</h3>
<p>When you run the Bulk Matcher in analysis mode, use a representative
sample of the actual data you are loading into the master index database.
You do not need to run the entire set of input records through
the analysis. </p>
<hr><p><b>Caution - </b>If you are <b>rerunning</b> the Bulk Matcher in analysis mode, make sure to
truncate the cluster synchronizer database tables first. Otherwise, unique constraint errors occur and
the run fails. To truncate the tables, run <tt>cluster-truncate.sql</tt> against the cluster synchronizer database.</p>
<hr>


<a name="gglda"></a><h5>To Run the Bulk Matcher in Analysis Mode</h5>
<ol>
<li><b>Complete the steps under <a href="admn_mi-load-config_p.html">Configuring the Initial Bulk Match and Load Tool</a>.</b></li>
<li><b>For each IBML Tool, open <tt>loader-config.xml</tt> (located in the IBML Tool home directory
in the <tt>conf</tt> subdirectory). </b></li>
<li><b>Set the <i>matchAnalyzerMode</i> property to <tt><b>true</b></tt>, and verify the remaining property settings.</b></li>
<li><b>Save and close the file.</b></li>
<li><b>Do one of the following:</b><ul>
<li><b>For Windows, navigate to the master IBML Tool home directory and double-click <tt>run.bat</tt>
or type <tt>run</tt> from a command line.</b></li>
<li><b>For UNIX, navigate to the master IBML Tool home directory and type <tt>sh run.sh</tt>
at the command line.</b></li></ul></li>
<li><b>Examine the log files to be sure no errors occurred during the analysis.</b></li>
<li><b>Continue to <a href="#admn_mi-load-review_t">Reviewing the Match Analysis Results</a>.</b></li></ol></div>


<div class="indent"><a name="admn_mi-load-review_t"></a><h3>Reviewing the Match Analysis Results</h3>
<p>The output of the Bulk Matcher when run in analysis mode is
a PDF file with a list of records that were automatically matched to
each other (assumed matches) from the data set you analyzed. The report displays
the matching weight given to each field, so you can analyze the value
and accuracy of each field for matching as well as the agreement and
disagreement weights (or u-probabilities and m-probabilities) defined in the matching configuration file of
the master index application.</p><p>The following figure shows two entries from the match analysis report. The name
of each match field is listed in the left column, the values
for those fields in the two assumed match records are listed in the
next two columns, and the composite match weight and the weight for each
field are listed in the final column.</p><a name="ggtbu"></a><h6>Figure&nbsp;2 Match Analysis Report Excerpt</h6><img src="figures/MatchAnalysisReport.gif" alt="Figure shows an excerpt from a sample match analysis report." width="514" height="268"></img><p>After you perform the steps under <a href="#admn_mi-load-analysis_t">Running the Bulk Matcher in Analysis Mode</a>, complete the analysis by using the
information in the match analysis report to do the following:</p>
<ul><li><p>Look for records that are assumed matches but should not be. This might indicate that the match threshold is set too low for the number of match fields or that one or more fields are given too much weighting relevance.</p></li>
<li><p>Verify that fields that uniquely identify records, such as a social security number, are given a higher weight when they match.</p></li>
<li><p>Verify that null fields are being handled correctly.</p></li>
<li><p>If the assumed match records with the lowest composite match weights are definite matches of one another, the match threshold might be set too high. You might want to experiment with setting the match threshold lower and running another match analysis.</p></li></ul>
<p>After you complete your analysis, you can reconfigure the matching logic as described
in<a href="#admn_mi-load-review_t">Reviewing the Match Analysis Results</a> and then rerun the analysis. If your analysis shows that the matching
configuration is correct and does not require any more changes, continue to <a href="admn_mi-load-run_t.html">Performing the Bulk Match</a>. If
the matching configuration is correct, make sure to update the master index application
to match the new configuration.</p></div>


<div class="indent"><a name="admn_mi-load-match_t"></a><h3>Reconfiguring the Matching Logic</h3>
<p>If the results of the match analysis show that you need to
modify the query, thresholds, or match string, you can make the changes to
the IBML Tool configuration file and run the Bulk Matcher again to analyze
the new settings. Once you are satisfied with the new settings, you need
to update the master index application configuration accordingly.</p>

<a name="ggtdc"></a><h5>To Reconfigure the Matching Logic</h5>
<ol>
<li><b>Complete the match analysis, as describe under <a href="#admn_mi-load-review_t">Reviewing the Match Analysis Results</a>.</b></li>
<li><b>In the directory where the IBML Tool is located, open <tt>conf/loader-config.xml</tt>.</b></li>
<li><b>To modify the match and duplicate thresholds for match analysis, enter new values
for the <i>duplicateThreshold</i> and <i>matchThreshold</i> elements.</b></li>
<li><b>To modify the blocking query for match analysis, modify the query builder section
(described in <a href="admn_mi-load-config_p.html#ggjps">Initial Bulk Match and Load Tool Blocking Query Configuration</a>).</b></li>
<li><b>To modify the match string for match analysis, modify the MatchingConfig section (described
in <a href="admn_mi-load-config_p.html#ggjqc">Initial Bulk Match and Load Tool Match String Configuration</a>).</b></li>
<li><b>Run the match analysis again, as described in <a href="#admn_mi-load-analysis_t">Running the Bulk Matcher in Analysis Mode</a>.</b></li>
<li><b>After you run the analysis for the final time, continue to <a href="admn_mi-load-run_t.html">Performing the Bulk Match</a>.</b>
<hr><p><b>Caution - </b>When you complete the analysis and have made the final modifications to the
blocking query, matching string, and match thresholds, be sure to modify the master
index application so the processing is identical. The match string is defined in
<tt>mefa.xml</tt>, the thresholds are defined in <tt>master.xml</tt>, and the blocking query is
defined in <tt>query.xml</tt>. You can copy the configuration from <tt>loader-config.xml</tt> directly into these files.</p>
<hr>
</li></ol></div>

   </div>

   <div class="BottomPageControlPane">
      <table class="pagecontrol">
         <tr>
            <td class="pageleft">
               <a href="admn_mi-load-config_p.html">Previous</a>
            </td>
            <td class="pageright">
               <a href="admn_mi-load-run_t.html">Next</a>
            </td>
         </tr>
      </table>

   </div>

</body>
</html>
