<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
   <title>Developing Master Indexes With Master Index Studio: DRAFT VERSION</title>

   <meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
   <meta http-equiv="content-language" content="en-US">
   <meta name="keywords" content="">
   <meta name="description" content="Developing Master Indexes With Master Index Studio describes how to develop a master index application using Master Index Studio, including creating the framework, custom plug-ins, and the master index database. It also provides instructions for defining the connection to the database.">
   <meta name="date" content="2008-04-01">
   <meta name="author" content="Carol Thom">

   <link rel="stylesheet" type="text/css" href="http://www.netbeans.org/netbeans.css" media="screen">
   <link rel="stylesheet" type="text/css" href="../../css/mural.css">
</head>

<body>

   <!-- Copyright (c) 2008 Sun Microsystems, Inc. All rights reserved. -->
   <!-- Use is subject to license terms. -->

   <a name="top"></a>
   <h1>Developing Master Indexes With Master Index Studio: DRAFT VERSION</h1>
   <div class="articledate" style="margin-left: 0px;">Last Updated: April 2008</div>

   <div class="embeddedtocpane">
     <div class="cornerTL"><div class="cornerTR"></div></div>

     <h5><span class="toctitle">Contents</span></span></h5>
     <div class="embeddedtoc">
       <p class="toc level1"><a href="landingpage.html">Developing Master Indexes: DRAFT VERSION</a></p>
<p class="toc level2"><a href="dsgn_eview-overview_c.html">Master Index Development Process Overview</a></p>
<p class="toc level2"><a href="dsgn_eview-runtime_c.html">The Master Index Framework and the Runtime Environment</a></p>
<p class="toc level2"><a href="dsgn_eview-prep_c.html">Before You Begin Developing a Master Index</a></p>
<p class="toc level3"><a href="dsgn_eview-prep_c.html#dsgn_eview-analyze_c">Preliminary Data Analysis for a Master Index</a></p>
<p class="toc level3"><a href="dsgn_eview-prep_c.html#dsgn_eview-plan_c">Planning a Master Index Project</a></p>
<p class="toc level3"><a href="dsgn_eview-prep_c.html#dsgn_eview-checklist_c">Master Index Project Initiation Checklist</a></p>
<p class="toc level2 tocsp"><a href="dsgn_eview-application_p.html">Creating a Master Index Application</a></p>
<p class="toc level3"><a href="dsgn_eview-application_p.html#dsgn_eview-wizard_t">Step 1: Create a Project and Start the Wizard</a></p>
<p class="toc level5"><a href="dsgn_eview-application_p.html#gentextid-249">To Create a Project and Start the Wizard</a></p>
<p class="toc level3 tocsp"><a href="dsgn_eview-application_p.html#dsgn_eview-name-app_t">Step 2: Name the Master Index Application</a></p>
<p class="toc level5"><a href="dsgn_eview-application_p.html#gftkn">To Name the Master Index Application</a></p>
<p class="toc level3 tocsp"><a href="dsgn_eview-application_p.html#dsgn_eview-systems_t">Step 3: Define Source Systems</a></p>
<p class="toc level5"><a href="dsgn_eview-application_p.html#gentextid-291">To Define Source Systems</a></p>
<p class="toc level3 tocsp"><a href="dsgn_eview-application_p.html#dsgn_eview-deployment_t">Step 4: Define the Deployment Environment</a></p>
<p class="toc level5"><a href="dsgn_eview-application_p.html#gentextid-336">To Define the Deployment Environment</a></p>
<p class="toc level3 tocsp"><a href="dsgn_eview-application_p.html#dsgn_eview-objects_t">Step 5: Define Parent and Child Objects</a></p>
<p class="toc level4"><a href="dsgn_eview-application_p.html#gftij">Creating Undefined Objects</a></p>
<p class="toc level4"><a href="dsgn_eview-application_p.html#gftkk">Creating Objects from a Template</a></p>
<p class="toc level4"><a href="dsgn_eview-application_p.html#gftkb">Deleting an Object from the Structure</a></p>
<p class="toc level3 tocsp"><a href="dsgn_eview-application_p.html#dsgn_eview-fields_t">Step 6: Define the Fields for Each Object</a></p>
<p class="toc level4"><a href="dsgn_eview-application_p.html#gftjs">Adding a Field</a></p>
<p class="toc level4"><a href="dsgn_eview-application_p.html#gftki">Configuring Field Properties</a></p>
<p class="toc level4"><a href="dsgn_eview-application_p.html#gftix">Deleting a Field</a></p>
<p class="toc level3 tocsp"><a href="dsgn_eview-application_p.html#dsgn_eview-wizard-gen_t">Step 7: Generate the Project Files</a></p>
<p class="toc level5"><a href="dsgn_eview-application_p.html#gentextid-561">To Generate the Configuration Files</a></p>
<p class="toc level3 tocsp"><a href="dsgn_eview-application_p.html#dsgn_eview-config-file_t">Step 8: Review the Configuration Files</a></p>
<p class="toc level2 tocsp"><a href="dsgn_eview-fields_r.html">Master Index Wizard Field Properties and Name Restrictions</a></p>
<p class="toc level3"><a href="dsgn_eview-fields_r.html#dsgn-eview-fieldname_c">Master Index Wizard Field Name Restrictions</a></p>
<p class="toc level3"><a href="dsgn_eview-fields_r.html#dsgn_eview-field-props_r">Master Index Wizard General Field Properties</a></p>
<p class="toc level3"><a href="dsgn_eview-fields_r.html#dsgn_eview-edm-props_r">Master Index Wizard MIDM Field Properties</a></p>
<p class="toc level2 tocsp"><a href="dsgn_eview-plug-ins_c.html">Custom Plug-ins for Master Index Custom Transaction Processing</a></p>
<p class="toc level3"><a href="dsgn_eview-plug-ins_c.html#dsgn_eview-update_c">Master Index Update Policy Plug-ins</a></p>
<p class="toc level4"><a href="dsgn_eview-plug-ins_c.html#ahair">Enterprise Merge Policy</a></p>
<p class="toc level4"><a href="dsgn_eview-plug-ins_c.html#ahais">Enterprise Unmerge Policy</a></p>
<p class="toc level4"><a href="dsgn_eview-plug-ins_c.html#ahait">Enterprise Update Policy</a></p>
<p class="toc level4"><a href="dsgn_eview-plug-ins_c.html#ahaiu">Enterprise Create Policy</a></p>
<p class="toc level4"><a href="dsgn_eview-plug-ins_c.html#ahaiv">System Merge Policy</a></p>
<p class="toc level4"><a href="dsgn_eview-plug-ins_c.html#ahaiw">System Unmerge Policy</a></p>
<p class="toc level4"><a href="dsgn_eview-plug-ins_c.html#ahaix">Undo Assumed Match Policy</a></p>
<p class="toc level3 tocsp"><a href="dsgn_eview-plug-ins_c.html#dsgn_eview-field-val_c">Master Index Field Validation Plug-ins</a></p>
<p class="toc level3"><a href="dsgn_eview-plug-ins_c.html#dsgn_eview-field-mask_c">Master Index Field Masking Plug-ins</a></p>
<p class="toc level3"><a href="dsgn_eview-plug-ins_c.html#dsgn_eview-match-logic_c">Master Index Match Processing Logic Plug-ins</a></p>
<p class="toc level4"><a href="dsgn_eview-plug-ins_c.html#ahajc">Custom Match Processing Logic Methods</a></p>
<p class="toc level4"><a href="dsgn_eview-plug-ins_c.html#ahajd">Custom Match Processing Logic Plug-in Requirements</a></p>
<p class="toc level4"><a href="dsgn_eview-plug-ins_c.html#ahaje">Custom Match Processing Configuration</a></p>
<p class="toc level3 tocsp"><a href="dsgn_eview-plug-ins_c.html#dsgn_eview-custom-except_c">Master Index Custom Plug-in Exception Processing</a></p>
<div class="onpage">
<p class="toc level2 tocsp"><a href="">Custom Plug-Ins for Master Index Custom Components</a></p>
<p class="toc level3"><a href="#dsgn_eview-surv-calc_c">Master Index Survivor Calculator Plug-ins</a></p>
<p class="toc level3"><a href="#dsgn_eview-custom-query_c">Master Index Query Builder Plug-ins</a></p>
<p class="toc level3"><a href="#dsgn_eview-custom-picker_c">Master Index Block Picker Plug-ins</a></p>
<p class="toc level3"><a href="#dsgn_eview-custom-pass-c">Master Index Pass Controller Plug-ins</a></p>
<p class="toc level3"><a href="#dsgn_eview-custom-match_c">Match Engine Plug-ins</a></p>
<p class="toc level3"><a href="#dsgn_eview-custom-stand_c">Standardization Engine Plug-ins</a></p>
<p class="toc level3"><a href="#dsgn_eview-custom-phon_c">Phonetic Encoders Plug-ins for a Master Index</a></p>
</div>
<p class="toc level2 tocsp"><a href="dsgn_eview-plug-ins_t.html">Implementing Master Index Custom Plug-ins</a></p>
<p class="toc level4"><a href="dsgn_eview-plug-ins_t.html#gentextid-1106">To Create Custom Plug-ins</a></p>
<p class="toc level2 tocsp"><a href="dsgn_eview-generate_t.html">Generating the Master Index  Application</a></p>
<p class="toc level4"><a href="dsgn_eview-generate_t.html#gentextid-1148">To Generate the Application for the First Time</a></p>
<p class="toc level4"><a href="dsgn_eview-generate_t.html#gentextid-1160">To Regenerate the Application</a></p>
<p class="toc level2 tocsp"><a href="dsgn_eview-database_c.html">Master Index Database Scripts and Design</a></p>
<p class="toc level3"><a href="dsgn_eview-database_c.html#dsgn_eview-dbs-scripts_c">Master Index Database Scripts</a></p>
<p class="toc level3"><a href="dsgn_eview-database_c.html#dsgn_eview-dbs-req_c">Master Index Database Requirements</a></p>
<p class="toc level4"><a href="dsgn_eview-database_c.html#ahaka">Database Platform Requirements</a></p>
<p class="toc level4"><a href="dsgn_eview-database_c.html#ahakb">Operating System Requirements</a></p>
<p class="toc level4"><a href="dsgn_eview-database_c.html#ahakc">Hardware Requirements</a></p>
<p class="toc level5"><a href="dsgn_eview-database_c.html#ahakd">Oracle Database</a></p>
<p class="toc level5"><a href="dsgn_eview-database_c.html#ahake">Microsoft SQL Server</a></p>
<p class="toc level3 tocsp"><a href="dsgn_eview-database_c.html#dsgn_eview-dbs-struct_c">Master Index Database Structure</a></p>
<p class="toc level3"><a href="dsgn_eview-database_c.html#dsgn_eview-dbs-design_c">Designing the Master Index Database</a></p>
<p class="toc level4"><a href="dsgn_eview-database_c.html#ahakh">Designing for Performance Optimization</a></p>
<p class="toc level4"><a href="dsgn_eview-database_c.html#ahaki">Data Structure Analysis</a></p>
<p class="toc level4"><a href="dsgn_eview-database_c.html#ahakj">Common Table Data</a></p>
<p class="toc level4"><a href="dsgn_eview-database_c.html#ahakk">User Code Data</a></p>
<p class="toc level4"><a href="dsgn_eview-database_c.html#ahakl">Database Considerations</a></p>
<p class="toc level5"><a href="dsgn_eview-database_c.html#ahakm">Database Sizing</a></p>
<p class="toc level5"><a href="dsgn_eview-database_c.html#ahakn">Database Distribution</a></p>
<p class="toc level5"><a href="dsgn_eview-database_c.html#ahako">Database Indexes</a></p>
<p class="toc level2 tocsp"><a href="dsgn_eview-database_t.html">Creating the Master Index Database</a></p>
<p class="toc level3"><a href="dsgn_eview-database_t.html#dsgn_eview-dbs-analyze_t">Step 1: Analyze the Master Index Database Requirements</a></p>
<p class="toc level3"><a href="dsgn_eview-database_t.html#dsgn_eview-dbs-create_t">Step 2: Create a Master Index Database and User</a></p>
<p class="toc level3"><a href="dsgn_eview-database_t.html#dsgn_eview-dbs-index_t">Step 3: Define Master Index Database Indexes</a></p>
<p class="toc level5"><a href="dsgn_eview-database_t.html#gentextid-1500">To Define an Index</a></p>
<p class="toc level3 tocsp"><a href="dsgn_eview-database_t.html#dsgn_eview-dbs-systems_t">Step 4: Define Master Index External Systems</a></p>
<p class="toc level5"><a href="dsgn_eview-database_t.html#gentextid-1536">To Define an External System</a></p>
<p class="toc level3 tocsp"><a href="dsgn_eview-database_t.html#dsgn_eview-db-systems_r">Master Index Database Table Description for sbyn_systems</a></p>
<p class="toc level3"><a href="dsgn_eview-database_t.html#dsgn_eview-dbs-codelist_t">Step 5: Define Master Index Code Lists</a></p>
<p class="toc level5"><a href="dsgn_eview-database_t.html#gentextid-1684">To Customize Common Table Data for Oracle</a></p>
<p class="toc level5"><a href="dsgn_eview-database_t.html#gentextid-1739">To Customize Common Table Data for SQL Server</a></p>
<p class="toc level3 tocsp"><a href="dsgn_eview-database_t.html#dsgn_eview-dbs-usercode_t">Step 6: Define Master Index User Code Lists</a></p>
<p class="toc level5"><a href="dsgn_eview-database_t.html#gentextid-1798">To Define a User Code List</a></p>
<p class="toc level3 tocsp"><a href="dsgn_eview-database_t.html#dsgn_eview-user-code_r">Master Index Database Table Description for sbyn_user_code</a></p>
<p class="toc level3"><a href="dsgn_eview-database_t.html#dsgn_eview-dbs-custom_t">Step 7: Create Custom Master Index Database Scripts</a></p>
<p class="toc level5"><a href="dsgn_eview-database_t.html#gentextid-1888">To Create a Custom Script</a></p>
<p class="toc level3 tocsp"><a href="dsgn_eview-database_t.html#dsgn_eview-dbs-install_t">Step 8: Create the Master Index Database Structure</a></p>
<p class="toc level5"><a href="dsgn_eview-database_t.html#gentextid-1902">To Create the Database Structure</a></p>
<p class="toc level3 tocsp"><a href="dsgn_eview-database_t.html#dsgn_eview-dbs-euid_t">Step 9: Specify a Starting EUID for a Master Index</a></p>
<p class="toc level2 tocsp"><a href="dsgn_eview-dbs-delete_t.html">Deleting Master Index Database Tables</a></p>
<p class="toc level4"><a href="dsgn_eview-dbs-delete_t.html#gfrjb">To Delete Database Tables</a></p>
<p class="toc level2 tocsp"><a href="dsgn_eview-database-con_p.html">Defining a Database Connection Pool</a></p>
<p class="toc level3"><a href="dsgn_eview-database-con_p.html#dsgn_eview-database-driv_t">Step 1: Add the Oracle Driver to the Application Server</a></p>
<p class="toc level3"><a href="dsgn_eview-database-con_p.html#dsgn_eview-database-pool_t">Step 2: Create a JDBC Connection Pool</a></p>
<p class="toc level5"><a href="dsgn_eview-database-con_p.html#gentextid-1978">To Create a JDBC Connection Pool</a></p>
<p class="toc level3 tocsp"><a href="dsgn_eview-database-con_p.html#dsgn_eview-database-res_t">Step 3: Create a JDBC Resource</a></p>
<p class="toc level5"><a href="dsgn_eview-database-con_p.html#gentextid-2031">To Create a JDBC Resource</a></p>

     </div>
     <div class="cornerBL"><div class="cornerBR"></div></div>
   </div>


   <div class="maincontent">


<a name="dsgn_eview-plug-ins2_c"></a>

<h2>Custom Plug-Ins for Master Index Custom Components</h2>
<p>Master Index Studio provides a flexible framework, allowing you to create custom Java
classes to plug in to most master index application components. The following topics
provide descriptions of some components for which you can create custom classes to
use in your master index application.</p>
<ul><li><p><a href="#dsgn_eview-surv-calc_c">Master Index Survivor Calculator Plug-ins</a> &ndash; Define how the single best record (SBR) is generated.</p></li>
<li><p><a href="#dsgn_eview-custom-query_c">Master Index Query Builder Plug-ins</a> &ndash; Define how queries are performed against the master index database.</p></li>
<li><p><a href="#dsgn_eview-custom-picker_c">Master Index Block Picker Plug-ins</a> &ndash; Define how the blocks of fields in a blocking query are selected during a query.</p></li>
<li><p><a href="#dsgn_eview-custom-pass-c">Master Index Pass Controller Plug-ins</a> &ndash; Define how the master index application determines whether to perform additional match passes against a record.</p></li>
<li><p><a href="#dsgn_eview-custom-match_c">Match Engine Plug-ins</a> &ndash; Define logic that connects to a match engine other than the Mural Match Engine.</p></li>
<li><p><a href="#dsgn_eview-custom-stand_c">Standardization Engine Plug-ins</a> - Define logic that connects to a standardization engine other than that provided by the Mural Standardization Engine.</p></li>
<li><p><a href="#dsgn_eview-custom-phon_c">Phonetic Encoders Plug-ins for a Master Index</a> &ndash; Define logic that connects to phonetic encoders other than those provided.</p></li></ul>


<div class="indent"><a name="dsgn_eview-surv-calc_c"></a><h3>Master Index Survivor Calculator Plug-ins</h3>
<p><a name="indexterm-106"></a>The survivor calculator determines which field values from the various system records will populate
the SBR for the enterprise record. You can create a custom survivor calculator
class that selects the surviving field values. Your custom class must implement the
survivor calculator interface. Call <tt>selectField</tt> in <tt>com.sun.mdm.index.survivor.SurvivorStrategyInterface</tt> to return the SBR value
for each field. For more information about the classes and methods to use,
see the Javadocs for Master Index Studio. The primary classes are contained in
the <tt>com.sun.mdm.index.survivor</tt> package. Enter the fully qualified class path for the custom survivor
calculator in update.xml.</p></div>


<div class="indent"><a name="dsgn_eview-custom-query_c"></a><h3>Master Index Query Builder Plug-ins</h3>
<p><a name="indexterm-107"></a>The query builder defines the different types of queries that can be used
in the master index application. You can implement custom queries using custom plug-ins. To
create a new query builder, you must define a class that extends
the base abstract <tt>com.sun.mdm.index.querybuilder.QueryBuilder</tt> and then specify that class in a <i>query-builder</i> element in query.xml.
The exception thrown is <tt>com.sun.mdm.index.querybuilder.QueryBuilderException</tt>. The following methods must be implemented.</p>
<ul><li><p><tt>init</tt> - This method receives the XML elements after the <i>config</i> element of query.xml so the query builder can read its custom configuration.</p></li>
<li><p><tt>getApplicableQueryIds</tt> - This method returns an array of string IDs indicating the query objects that can be generated given the available criteria. For example, in the blocking configuration, the unique ID of each block definition is the string that is returned by <tt>getApplicableQueryIds</tt>.</p></li>
<li><p><tt>buildQueryObject</tt> - This method constructs the query object based on one of the applicable query IDs provided as an input argument.</p></li></ul>
<p>For more information about query-related Java classes, see the master index Javadocs.</p></div>


<div class="indent"><a name="dsgn_eview-custom-picker_c"></a><h3>Master Index Block Picker Plug-ins</h3>
<p><a name="indexterm-108"></a>The block picker chooses which block definition in the blocking query to use
for the next matching pass. You can create a custom block picker class
to select query blocks in a customized manner. If you create a custom
block picker, specify the fully qualified name of this custom plug-in for the
<i>block-picker</i> element of mefa.xml. Follow these guidelines when implementing a custom block picker.</p>
<ul><li><p>Implement the <tt>com.sun.mdm.index.matching.BlockPicker</tt> interface to select the blocks in the desired order.</p></li>
<li><p>If none of the remaining blocks should be executed, throw a <tt>NoBlockApplicableException</tt> from the <tt>pickBlock</tt> method.</p></li></ul>
</div>


<div class="indent"><a name="dsgn_eview-custom-pass-c"></a><h3>Master Index Pass Controller Plug-ins</h3>
<p><a name="indexterm-109"></a>The matching process can be executed in multiple stages. After a block is
evaluated, the pass controller determines whether the results found are sufficient or if matching
should continue by performing another match pass. If you create a custom pass
controller, specify the name of the custom Pass Controller in the <i>pass-controller</i> element
of mefa.xml. Follow these guidelines when implementing a custom pass controller.</p>
<ul><li><p>Implement the <tt>com.sun.mdm.index.matching.PassController</tt> interface to evaluate whether to do another pass or not.</p></li>
<li><p>Return <tt><b>true</b></tt> from <tt>evalAnotherPass</tt> to specify that an additional pass be performed; return <tt><b>false</b></tt> to specify that no additional passes are performed.</p></li></ul>
</div>


<div class="indent"><a name="dsgn_eview-custom-match_c"></a><h3>Match Engine Plug-ins</h3>
<p><a name="indexterm-110"></a>You can define classes to connect to a custom match engine instead of
the Mural Match Engine. Specify the names of the custom classes you create
in the <i>matcher-api</i> and <i>matcher-config</i> elements of mefa.xml. Follow these guidelines when implementing
custom match engine classes.</p>
<ul><li><p>Implement the <tt>com.sun.mdm.index.matching.MatcherAPI</tt> interface to communicate with the match engine.</p></li>
<li><p>Implement the <tt>com.sun.mdm.index.matching.MatchEngineConfiguration</tt> interface to retrieve any configuration values the match engine requires for initialization.</p></li></ul>
<p>You can also define custom comparison functions to plug in to the Mural
Match Engine. For more information, see <a href="https://open-dm-dq.dev.java.net/docs/sme/landingpage.html">Understanding the Mural Match Engine</a>.</p></div>


<div class="indent"><a name="dsgn_eview-custom-stand_c"></a><h3>Standardization Engine Plug-ins</h3>
<p><a name="indexterm-111"></a>You can define classes to connect to a custom standardization engine instead of
the Mural Standardization Engine. Specify the names of the custom classes you create
in the <i>standardizer-api</i> and <i>standardizer-config</i> elements of mefa.xml. Follow these guidelines when
implementing custom standardization engine classes.</p>
<ul><li><p>Implement the <tt>com.sun.mdm.index.matching.StandardizerAPI</tt> interface to communicate with the standardization engine.</p></li>
<li><p>Implement the <tt>com.sun.mdm.index.matching.StandardizerEngineConfiguration</tt> interface to retrieve any configuration values the standardization engine requires for initialization.</p></li></ul>
<p>You can also define custom standardization rules to plug in to the Mural
Standardization Engine. For more information, see <a href="https://open-dm-dq.dev.java.net/docs/sse/landingpage.html">Understanding the Mural Standardization Engine</a>.</p></div>


<div class="indent"><a name="dsgn_eview-custom-phon_c"></a><h3>Phonetic Encoders Plug-ins for a Master Index</h3>
<p><a name="indexterm-112"></a>The master index application supports several phonetic encoders, and you can define custom classes
to implement additional phonetic encoders if needed. Specify the names of the custom
classes you create in the <i>encoder-implementation-class</i> element of mefa.xml. When creating a
custom phonetic encoder class, implement the <tt>com.sun.mdm.index.phonetic.PhoneticEncoder</tt> interface.</p></div>

   </div>

   <div class="BottomPageControlPane">
      <table class="pagecontrol">
         <tr>
            <td class="pageleft">
               <a href="dsgn_eview-plug-ins_c.html">Previous</a>
            </td>
            <td class="pageright">
               <a href="dsgn_eview-plug-ins_t.html">Next</a>
            </td>
         </tr>
      </table>

   </div>

</body>
</html>
